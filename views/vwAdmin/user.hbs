{{#section "css"}}
  <link
    rel="stylesheet"
    type="text/css"
    href="../../public/assets/css/admin/admin_profile.css"
  />
 
  <style>
    footer { margin-top: 50px; }
    td { font-weight: 500;}
  </style>
{{/section}}
<div class="container-fluid">
  <div class="row" style="margin-bottom:16px">
    <nav class="col-2 bg-light sidebar">
        <ul class="nav flex-column">
          <li>
            <div class="img-profile">
              <img
                class="rounded-circle img-thumbnail img-avt"
                {{#if (isEmpty this.user.image) }}
                src="../../public/assets/images/no_avt_male.png"
                {{else}}
                src="../../public/assets/images/{{this.user.image}}"
                {{/if}}
                alt="avatar"
              />
            </div>
            <div>
              <p class="h6 img-name">{{this.user.firstName}} {{this.user.lastName}}</p>
            </div>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/admin/profile">
              <i class="fa fa-cog" aria-hidden="true"></i>
              Hồ sơ cá nhân
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" href="/admin/users">
              <i class="fa fa-user" aria-hidden="true"></i>
              Người dùng
            </a>
            <ul class="list-group">
              <li class="d-flex justify-content-between align-items-center pl-5 pr-4">
                <a class="sub-nav" href="/admin/users?role=1">
                  Người thuê trọ
                </a>
                <span class="badge badge-primary badge-pill">14</span>
              </li>
              <li class=" d-flex justify-content-between align-items-center pl-5 pr-4">
                <a class="sub-nav" href="/admin/users?role=2">
                   Người chủ trọ
                </a>
                <span class="badge badge-primary badge-pill">2</span>
              </li>
              <li class=" d-flex justify-content-between align-items-center pl-5 pr-4">
                <a class="sub-nav" href="/admin/users?role=3">
                   Admin
                </a>
                <span class="badge badge-primary badge-pill">1</span>
              </li>
            </ul>
            
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/admin/posts">
              <i class="fa fa-user" aria-hidden="true"></i>
              Tin đăng trọ
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/admin/appointments">
              <i class="fa fa-user" aria-hidden="true"></i>
              Lịch hẹn
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/admin/reviews">
              <i class="fa fa-comments" aria-hidden="true"></i>
              Đánh giá
            </a>
          </li>
        </ul>
    </nav>
    <div class="col-sm-10">
      <div class="card">
        <div class="card-header" style="display:flex;justify-content: space-between;">
          <h3>Quản lí người dùng</h3>
          <a class="btn btn-primary font-weight-bold" href="/admin/users/new">Thêm người dùng</a>
        </div>
        {{#if this.empty}}
          <div class="card-body text-muted">
            Empty Data!!!
          </div>
        {{else}}
          <table class="table table-hover">
            <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col">Họ tên</th>
                <th scope="col">Địa chỉ</th>
                <th scope="col">SĐT</th>
                <th scope="col">Email</th>
                <th scope="col">Role</th>
                <th scope="col">Trạng thái</th>
                <th class="text-center" scope="col">Hành động</th>
              </tr>
            </thead>
            <tbody>
              {{#each users}}
                  <tr>
                    <th scope="row">{{math @index "+" 1}}</th>
                    <td>{{this.HoTen}}</td>
                    <td>{{this.DiaChi}}</td>
                    <td>{{this.SDT}}</td>
                    <td>{{this.Email}}</td>
                    <td>{{this.LoaiNguoiDung}}</td>
                    {{#if (ifEqualString this.TrangThai "Hoạt động")}}
                      <td class="text-success">{{this.TrangThai}}</td>
                      <td class="text-center">
                        <a
                          class="btn btn-sm btn-danger"
                          href="/admin/users?id={{this.NguoiDungID}}&block=true"
                          role="button"
                          title="Khóa tài khoản"
                        >
                        <i class="fa fa-lock" aria-hidden="true"></i>
                        </a>
                        
                    {{else}}
                      <td class="text-danger">{{this.TrangThai}}</td>
                      <td class="text-center">
                        <a
                          class="btn btn-sm btn-success"
                          role="button"
                          title="Mở tài khoản"
                          href="/admin/users?id={{this.NguoiDungID}}&block=false"
                        >
                         <i class="fa fa-unlock-alt" aria-hidden="true"></i>
                        </a>
                    
                    {{/if}}
                        </>
                        <a
                          class="btn btn-sm btn-secondary"
                          href="/admin/users/{{this.NguoiDungID}}"
                          role="button"
                          title="Chỉnh sửa"
                        >
                        <i class="fa fa-ellipsis-h" aria-hidden="true"></i>
                        </a>
                    </td>
                  </tr>
              {{/each}}
            </tbody>
          </table>
        {{/if}}

        {{#if havePagination}}
          <ul class="pagination">
            {{#if firstPage}}
              <li class="page-item disabled">
                <span class="page-link">Previous</span>
              </li>
            {{else}}
              <li class="page-item">
                <a class="page-link" href="{{prevPage}}">Previous</a>
              </li>
            {{/if}}
            {{#each this.pageNumbers}}
              {{#if isCurrent}}
                <li class="page-item active" aria-current="page">
                  <span class="page-link">{{value}}</span>
                </li>
              {{else}}
                <li class="page-item">
                  <a class="page-link" href="?page={{value}}">{{value}}</a>
                </li>
              {{/if}}
            {{/each}}
            {{#if lastPage}}
              <li class="page-item disabled">
                <span class="page-link">Next</span>
              </li>
            {{else}}
              <li class="page-item">
                <a class="page-link" href="{{nextPage}}">Next</a>
              </li>
            {{/if}}
          </ul>
        {{/if}}

        
      </div>
    </div>
  </div>
</div>